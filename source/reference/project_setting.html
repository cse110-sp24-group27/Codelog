<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Settings</title>
    <!-- <link rel="stylesheet" href="/source/assets/styles/project_styles.css"> -->
    <link rel="stylesheet" href="../assets/styles/project_setting.css">
</head>
    <!-- FontAwesome for icons -->
<script src="https://kit.fontawesome.com/306a08d434.js" crossorigin="anonymous"></script>

<body>
    <header>
        <!--Logo for the website-->
        <img id="codelog-pic" src="../../admin/branding/CodeLog_logo.png" width="100" alt="CodeLog logo"/>
        <h1 id="codelog">CodeLog</h1>

        <div class="but">
            <!--Button to go to the Project Home Page-->
            <button onclick="location.href" id="home">Home</button>

            <script type="text/javascript">
                document.getElementById("home").onclick = function () {
                    location.href = "http://127.0.0.1:5500/cse110-sp24-group27/home_projects_page.html";
                };
            </script>
             

            <!--Button to go to setting and edit user's profile-->
            <button onclick="location.href" id="setting">Setting</button>
            <script type="text/javascript">
                document.getElementById("setting").onclick = function () {
                    location.href = "http://127.0.0.1:5500/cse110-sp24-group27/source/reference/project_setting.html";
                };
            </script>
        </div>
    </header>

    <main>
        <h1>Profile Setting</h1>
        <!--User's profile settings form-->
        <div class="profile">
            <!-- Profile Picture with hover effect to change avatar -->
            <div>
                <label for="profile-picture-upload">
                 <img id="profile-picture" src="https://via.placeholder.com/150" alt="Profile Picture" title="Change your avatar" />
                </label>
                <input type="file" id="profile-picture-upload" style="display: none;" onchange="loadImage(event)"/>
            </div>
            
              <!-- Profile Picture Change Text -->
              <div id="change-avatar-text" style="display: none;">Change your avatar</div>
            

            <!-- Form for User Information -->
            <form id="profile-form">
                <!-- Name Input -->
                <div class="form-group">
                    <label for="name-input">Name</label>
                    <input type="text" id="name-input" placeholder="Developer's Name">
                </div>

                <!-- Pronouns Input -->
                <div class="form-group">
                    <label for="pronouns-input">Pronouns</label>
                    <input type="text" id="pronouns-input" placeholder="they/them">
                </div>

                <!-- Bio Input -->
                <div class="form-group">
                    <label for="bio-input">Bio</label>
                    <input type="text" id="bio-input" placeholder="Bio - ex. Software Engineer at UCSD">
                </div>

                <!-- Social Accounts Section -->
                <div class="form-group">
                    <label for="email-input"><i class="fa-solid fa-envelope"></i> Email</label>
                    <input type="email" id="email-input" placeholder="Email">
                </div>

                <div class="form-group">
                    <label for="linkedin-input"><i class="fa-brands fa-linkedin"></i> LinkedIn</label>
                    <input type="text" id="linkedin-input" placeholder="LinkedIn">
                </div>

                <div class="form-group">
                    <label for="github-input"><i class="fa-brands fa-github"></i> GitHub</label>
                    <input type="text" id="github-input" placeholder="GitHub">
                </div>

                <!-- Buttons -->
                <button type="button" id="save-bnt" onclick="save()">Save</button>
                <button type="button" id="cancel-bnt" onclick="cancel()">Cancel</button>
            </form>
        </div>
    </main>

    <footer id="footer">
        <p>copyright</p>
    </footer>

    <script>
        document.getElementById('profile-picture').addEventListener('mouseover', function () {
            document.getElementById('change-avatar-text').style.display = 'block';
            console.log('hover over'); // debug line
        });

        document.getElementById('profile-picture').addEventListener('mouseout', function () {
            document.getElementById('change-avatar-text').style.display = 'none';
        });
        function loadImage(event) {
            const output = document.getElementById('profile-picture');
            output.src = URL.createObjectURL(event.target.files[0]);
        }

        function save() {
            const profile = {
                name: document.getElementById('name-input').value,
                pronouns: document.getElementById('pronouns-input').value,
                bio: document.getElementById('bio-input').value,
                socialAccount: {
                    email: document.getElementById('email-input').value,
                    linkedin: document.getElementById('linkedin-input').value,
                    github: document.getElementById('github-input').value
                },
                img: document.getElementById('profile-picture').src
            };

            localStorage.setItem('profile', JSON.stringify(profile));
            console.log("profile:", profile); //debug line
        }

        function cancel() {
            document.getElementById('profile-form').reset();
        }
    </script>
</body>
</html>
